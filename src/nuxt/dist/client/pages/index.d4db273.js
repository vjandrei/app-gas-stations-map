(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{166:function(t,n,e){},167:function(t,n,e){"use strict";var o=e(166);e.n(o).a},168:function(t,n,e){"use strict";e.r(n);e(20);var o,r=e(4),c=(e(25),e(11),e(163),"undefined"!=typeof window);c&&(o=e(2));var l={data:function(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:15,center:null,bounds:null}},created:function(){var t=this;c&&this.$store.state.locations.forEach((function(n,e){t.center=o.latLng(Object.values(n.geolocations))}))},computed:{stations:function(){return this.$store.state.stations.all},geolocations:function(){return this.$store.state.geolocations}},methods:{markers:function(){},centerUpdated:function(t){this.center=t},boundsUpdated:function(t){this.bounds=t;this.$store.state.stations.all}}},d=(e(167),e(16)),m=Object(d.a)(l,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{attrs:{id:"map"}},[e("client-only",[e("l-map",{ref:"myMap",attrs:{zoom:t.zoom,center:t.center},on:{"update:bounds":t.boundsUpdated,"update:center":t.centerUpdated,ready:t.markers}},[e("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._v(" "),t._l(t.stations,(function(t){return e("l-marker",{key:t.id,attrs:{"lat-lng":t.coords}})})),t._v(" "),e("v-locatecontrol")],2)],1)],1),t._v(" "),e("div",{attrs:{id:"sidebar"}})])}),[],!1,null,null,null).exports,f={data:function(){return{markers:[]}},computed:{stations:function(){var t=this;return this.$store.state.stations.all.map((function(n){return Object.assign({},n,{distance:L.latLng(t.$store.state.locations[0].geolocations.latitude,t.$store.state.locations[0].geolocations.longitude).distanceTo(L.latLng([n.coords.lat,n.coords.lng]))})})).sort((function(a,b){return a.distance-b.distance}))}},methods:{orderList:function(){console.log("Filter!!")}}},v={data:function(){return{userCoords:[]}},components:{StationList:Object(d.a)(f,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t._v("\n  Nearest stations\n  "),e("ul",t._l(t.stations,(function(n){return e("li",{key:n.id,ref:"list",refInFor:!0},[e("nuxt-link",{staticClass:"font-semibold",attrs:{to:{name:"stations-id",params:{id:n.url_name}}}},[t._v(t._s(n.name)+"\n      ")]),t._v("\n      ("+t._s((n.distance/1e3).toFixed(1))+"\n      km)\n      "+t._s(n.address)+"\n    ")],1)})),0)])}),[],!1,null,null,null).exports,StationMap:m},created:function(){},computed:{hasUserlocation:function(){return this.$store.state.hasUserlocation},noUserLocation:function(){return this.$store.state.gettingLocation},showLocationLoading:function(){return this.$store.state.loadLocation}},methods:{getLocation:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$store.dispatch("fetchFromNavigator");case 1:case"end":return n.stop()}}),n)})))()}}},h=Object(d.a)(v,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"container mx-auto p-4 s:max-w-screen-sm"},[t.noUserLocation?e("div",{staticClass:"text-center"},[e("h1",{staticClass:"mx-auto text-center text-xl font-bold mb-4"},[t._v("\n        Kaasun tankkaaminen\n      ")]),t._v(" "),e("p",{staticClass:"mb-4"},[t._v("\n        Kaasuasemat on karttapohjainen sovellus josta löydät kaasuautoilu\n        asemat ympäri maailmaa. Jotta asemat tulisi sovellukseen sinun on\n        annettava oikeus sovellukselle käyttääkseen paikannustietoja.\n      ")]),t._v(" "),e("button",{staticClass:"mx-auto text-center bg-blue-500 hover:bg-blue-700 text-sm text-white font-bold py-2 px-4 rounded",on:{click:t.getLocation}},[t.showLocationLoading?e("span",[t._v("Haetaan paikkatietoja")]):e("span",[t._v("Paikanna minut")])])]):t._e(),t._v(" "),t.hasUserlocation?e("div",[e("StationMap"),t._v(" "),e("pre",{staticClass:"ui-coordinates",attrs:{id:"coordinates"}}),t._v(" "),e("StationList")],1):t._e()])])}),[],!1,null,null,null);n.default=h.exports}}]);